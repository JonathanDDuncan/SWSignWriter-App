(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{zFnc:function(e,t,n){"use strict";n.r(t),n.d(t,"EditPageModule",function(){return D});var i=n("ofXK"),c=n("3Pt+"),o=n("tyNb"),r=n("TEn/"),a=n("HaE+"),s=n("ivw2"),l=n("HtUY"),b=n("O+7k"),d=n("fXoL"),g=n("xgIS"),u=n("lJxs"),h=n("Kj3r"),m=n("/uUt"),p=n("ACu4"),f=n("Q/j7"),M=n("2/4T"),v=n("FUe0"),O=n("KH6c"),k=n("sYmb"),y=n("ZJwn");const N=["searchRef"],S=["content"];function C(e,t){if(1&e){const e=d.Ob();d.Nb(0,"ion-button",10),d.Vb("click",function(){d.ic(e);const n=t.$implicit;return d.Xb().addWord(n.gloss)}),d.pc(1),d.Mb()}if(2&e){const e=t.$implicit;d.Ab(1),d.rc(" ",e.gloss," ")}}function P(e,t){if(1&e&&(d.Nb(0,"ion-badge",26),d.pc(1),d.Mb()),2&e){const e=d.Xb().$implicit;d.Ab(1),d.qc(e.totalmatches)}}function w(e,t){if(1&e){const e=d.Ob();d.Nb(0,"ion-item"),d.Nb(1,"ion-grid"),d.Nb(2,"ion-row",11),d.Nb(3,"button",12),d.Vb("click",function(){d.ic(e);const n=t.index;return d.Xb().replace(n)}),d.Nb(4,"div",13),d.Nb(5,"div",14),d.Lb(6,"span",15),d.Yb(7,"safeHtml"),d.Nb(8,"ion-grid"),d.Nb(9,"ion-row"),d.Nb(10,"ion-col",16),d.Nb(11,"p"),d.pc(12),d.Yb(13,"translate"),d.Mb(),d.Mb(),d.Nb(14,"ion-col",17),d.nc(15,P,2,1,"ion-badge",18),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Mb(),d.Nb(16,"ion-row",11),d.Nb(17,"div",19),d.Nb(18,"input",20),d.Vb("change",function(){d.ic(e);const n=t.$implicit,i=d.Xb();return n.lane=i.Lane.Left}),d.Mb(),d.Lb(19,"label",21),d.Nb(20,"input",22),d.Vb("change",function(){d.ic(e);const n=t.$implicit,i=d.Xb();return n.lane=i.Lane.Middle}),d.Mb(),d.Lb(21,"label",23),d.Nb(22,"input",24),d.Vb("change",function(){d.ic(e);const n=t.$implicit,i=d.Xb();return n.lane=i.Lane.Right}),d.Mb(),d.Lb(23,"label",25),d.Mb(),d.Mb(),d.Mb(),d.Mb()}if(2&e){const e=t.$implicit,n=d.Xb();d.Ab(3),d.mc("background-color",e.color),d.Ab(1),d.cc("className",n.laneStyle(e.lane)),d.Ab(2),d.cc("innerHTML",d.Zb(7,18,e.svg),d.jc),d.Ab(6),d.rc(" ",e.sign?e.sign.gloss:d.Zb(13,20," sign not found")," "),d.Ab(3),d.cc("ngIf",e.totalmatches>1),d.Ab(3),d.ec("id","",e.id,"-left"),d.ec("name","name",e.id,""),d.cc("checked",n.Lane.Left===e.lane),d.Ab(1),d.ec("for","",e.id,"-left"),d.Ab(1),d.ec("id","",e.id,"-middle"),d.ec("name","name",e.id,""),d.cc("checked",n.Lane.Middle===e.lane),d.Ab(1),d.ec("for","",e.id,"-middle"),d.Ab(1),d.ec("id","",e.id,"-right"),d.ec("name","name",e.id,""),d.cc("checked",n.Lane.Right===e.lane),d.Ab(1),d.ec("for","",e.id,"-right")}}let _=(()=>{class e{constructor(e,t,n,i,c,o,r){this.modalController=e,this.documentService=t,this.settingsService=n,this.subscriptionServiceNG=i,this.sentry=c,this.router=o,this.subscriptionServiceAndroid=r,this.Lane=f.a,this.subscriptionService=v.a.isNativePlatform()?r:i}ngOnInit(){var e=this;return Object(a.a)(function*(){if(e.editedDocument={editedsigns:[]},null==(yield e.settingsService.getFirstTime()))return e.router.navigateByUrl("/settings");yield e.documentService.loadSigns(),e.documentService.clearDocument(),e.showDocument(e.documentService.getDocument())})()}ionViewWillEnter(){this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument())}ngAfterViewInit(){Object(g.a)(this.searchRef.nativeElement,"keyup").pipe(Object(u.a)(e=>e.target.value),Object(h.a)(100),Object(m.a)()).subscribe(e=>{e&&e.includes("  ")&&(this.searchRef.nativeElement.value=this.searchRef.nativeElement.value.replace("  ","-"),e=e.replace("  ","-")),this.showAvailableWords(e),this.documentService.searchFrase(e),this.showDocument(this.documentService.getDocument()),this.scrollToBottom()})}showAvailableWords(e){this.matchingWords=this.documentService.showAvailableWords(e)}showDocument(e){this.editedDocument={editedsigns:e.signs}}trackFound(e,t){return t?t.id:void 0}addWord(e){let t=this.documentService.getSearchSentence().split(" ").filter(e=>""!==e&&" "!==e);t=t.slice(0,-1);const n=t.join(" ");this.documentService.searchFrase(n+" "+e),this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument()),this.matchingWords=[]}accept(){return this.sentry.sentryMessage("Entered text : "+this.documentService.getSearchSentence()),this.router.navigateByUrl("/view")}replace(e){var t=this;return Object(a.a)(function*(){const n=t.documentService.getSearchWord(e),i=yield t.modalController.create({component:p.a,componentProps:{searchword:n}});yield i.present();const{data:c}=yield i.onDidDismiss();c&&(t.documentService.replaceElement(e,c.result),t.showDocument(t.documentService.getDocument()),t.searchRef.nativeElement.value=t.documentService.getSearchSentence())})()}scrollToBottom(){setTimeout(()=>{this.content.scrollToBottom(200)},50)}resetEntries(){}laneStyle(e){switch(e){case f.a.Left:return"lane-left";case f.a.Right:return"lane-right";default:return"lane-middle"}}}return e.\u0275fac=function(t){return new(t||e)(d.Kb(r.I),d.Kb(M.a),d.Kb(b.a),d.Kb(l.a),d.Kb(s.a),d.Kb(o.g),d.Kb(O.a))},e.\u0275cmp=d.Eb({type:e,selectors:[["app-edit"]],viewQuery:function(e,t){if(1&e&&(d.uc(N,3,d.m),d.uc(S,3)),2&e){let e;d.gc(e=d.Wb())&&(t.searchRef=e.first),d.gc(e=d.Wb())&&(t.content=e.first)}},decls:27,vars:15,consts:[["slot","start"],[3,"placeholder"],["searchRef",""],[2,"display","none",3,"click"],["style","text-transform: none;",3,"click",4,"ngFor","ngForOf"],["padding","",1,"vertical-center"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","slot","fixed","vertical","bottom"],["name","caret-forward-circle-outline",2,"zoom","2",3,"click"],[2,"text-transform","none",3,"click"],["justify-content-center",""],["type","button",1,"editbutton",3,"click"],[3,"className"],[1,"sign"],[3,"innerHTML"],["size","10"],["size","1"],["color","light",4,"ngIf"],[1,"lane-selector"],["type","radio","value","left",3,"id","name","checked","change"],[1,"label-background","left",3,"for"],["type","radio","value","middle",3,"id","name","checked","change"],[1,"label-background","middle",3,"for"],["type","radio","value","right",3,"id","name","checked","change"],[1,"label-background","right",3,"for"],["color","light"]],template:function(e,t){1&e&&(d.Nb(0,"ion-header"),d.Nb(1,"ion-toolbar"),d.Nb(2,"ion-buttons",0),d.Lb(3,"ion-menu-button"),d.Mb(),d.Nb(4,"ion-title"),d.pc(5),d.Yb(6,"translate"),d.Mb(),d.Mb(),d.Nb(7,"ion-item"),d.Lb(8,"ion-textarea",1,2),d.Yb(10,"translate"),d.Nb(11,"ion-button",3),d.Vb("click",function(){return t.resetEntries()}),d.pc(12),d.Yb(13,"translate"),d.Mb(),d.Mb(),d.Nb(14,"ion-item"),d.Nb(15,"div"),d.nc(16,C,2,1,"ion-button",4),d.Mb(),d.Mb(),d.Mb(),d.Nb(17,"ion-content",5,6),d.Nb(19,"ion-list"),d.nc(20,w,24,22,"ion-item",7),d.Mb(),d.Nb(21,"ion-fab",8),d.Nb(22,"ion-label"),d.pc(23),d.Yb(24,"translate"),d.Mb(),d.Nb(25,"ion-fab-button"),d.Nb(26,"ion-icon",9),d.Vb("click",function(){return t.accept()}),d.Mb(),d.Mb(),d.Mb(),d.Mb()),2&e&&(d.Ab(5),d.qc(d.Zb(6,7,"Edit")),d.Ab(3),d.dc("placeholder",d.Zb(10,9,"Enter sentence")),d.Ab(4),d.rc(" ",d.Zb(13,11,"Reset")," "),d.Ab(4),d.cc("ngForOf",t.matchingWords),d.Ab(4),d.cc("ngForOf",t.editedDocument.editedsigns)("ngForTrackBy",t.trackFound),d.Ab(3),d.qc(d.Zb(24,13,"Next")))},directives:[r.l,r.E,r.e,r.s,r.D,r.n,r.C,r.N,r.d,i.j,r.g,r.p,r.h,r.o,r.i,r.m,r.k,r.y,r.f,i.k,r.c],pipes:[k.c,y.a],styles:[".sign[_ngcontent-%COMP%]{padding:0}.editbutton[_ngcontent-%COMP%]{margin:5px}.lane-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.left[_ngcontent-%COMP%]{background-image:url(Left.be0fb9308787483df32e.png)}.middle[_ngcontent-%COMP%]{background-image:url(Center.c4ba7825880434b3be70.png)}.right[_ngcontent-%COMP%]{background-image:url(Right.eaf043f9ce149fa15603.png)}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.2) grayscale(.5) opacity(.9);filter:brightness(1.2) grayscale(.5) opacity(.9);background-color:#397ac4}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.8) grayscale(1) opacity(.7);filter:brightness(1.8) grayscale(1) opacity(.7)}.label-background[_ngcontent-%COMP%]{cursor:pointer;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline-block;margin:0 2px;width:45px;height:45px;transition:all .1s ease-in}.lane-left[_ngcontent-%COMP%]{padding-right:40px}.lane-middle[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.lane-right[_ngcontent-%COMP%]{padding-left:40px}.item-text-center[_ngcontent-%COMP%]{display:-moz-flex;-moz-align-items:center;position:absolute;top:0;height:100%}.item-text-center[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{display:flex;align-items:center}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{max-width:300px;width:100%;margin:auto;text-align:center}"]}),e})();var x=n("iTUp"),A=n("PCNd");const L=[{path:"",component:_}];let D=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=d.Ib({type:e}),e.\u0275inj=d.Hb({imports:[[i.c,c.a,r.F,o.j.forChild(L),x.a,A.a]]}),e})()}}]);
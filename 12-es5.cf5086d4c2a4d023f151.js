!function(){function e(e,n){if(!(e instanceof n))throw new TypeError("Cannot call a class as a function")}function n(e,n){for(var t=0;t<n.length;t++){var i=n[t];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[12],{zFnc:function(t,i,c){"use strict";c.r(i),c.d(i,"EditPageModule",function(){return j});var r=c("ofXK"),o=c("3Pt+"),a=c("tyNb"),l=c("TEn/"),s=c("HaE+"),b=c("ivw2"),u=c("HtUY"),d=c("O+7k"),g=c("fXoL"),m=c("xgIS"),f=c("lJxs"),h=c("Kj3r"),p=c("/uUt"),v=c("ACu4"),M=c("Q/j7"),k=c("2/4T"),y=c("FUe0"),O=c("KH6c"),w=c("sYmb"),N=c("ZJwn"),S=["searchRef"],C=["content"];function P(e,n){if(1&e){var t=g.Ob();g.Nb(0,"ion-button",10),g.Vb("click",function(){g.ic(t);var e=n.$implicit;return g.Xb().addWord(e.gloss)}),g.pc(1),g.Mb()}if(2&e){var i=n.$implicit;g.Ab(1),g.rc(" ",i.gloss," ")}}function x(e,n){if(1&e&&(g.Nb(0,"ion-badge",26),g.pc(1),g.Mb()),2&e){var t=g.Xb().$implicit;g.Ab(1),g.qc(t.totalmatches)}}function _(e,n){if(1&e){var t=g.Ob();g.Nb(0,"ion-item"),g.Nb(1,"ion-grid"),g.Nb(2,"ion-row",11),g.Nb(3,"button",12),g.Vb("click",function(){g.ic(t);var e=n.index;return g.Xb().replace(e)}),g.Nb(4,"div",13),g.Nb(5,"div",14),g.Lb(6,"span",15),g.Yb(7,"safeHtml"),g.Nb(8,"ion-grid"),g.Nb(9,"ion-row"),g.Nb(10,"ion-col",16),g.Nb(11,"p"),g.pc(12),g.Yb(13,"translate"),g.Mb(),g.Mb(),g.Nb(14,"ion-col",17),g.nc(15,x,2,1,"ion-badge",18),g.Mb(),g.Mb(),g.Mb(),g.Mb(),g.Mb(),g.Mb(),g.Mb(),g.Nb(16,"ion-row",11),g.Nb(17,"div",19),g.Nb(18,"input",20),g.Vb("change",function(){g.ic(t);var e=n.$implicit,i=g.Xb();return e.lane=i.Lane.Left}),g.Mb(),g.Lb(19,"label",21),g.Nb(20,"input",22),g.Vb("change",function(){g.ic(t);var e=n.$implicit,i=g.Xb();return e.lane=i.Lane.Middle}),g.Mb(),g.Lb(21,"label",23),g.Nb(22,"input",24),g.Vb("change",function(){g.ic(t);var e=n.$implicit,i=g.Xb();return e.lane=i.Lane.Right}),g.Mb(),g.Lb(23,"label",25),g.Mb(),g.Mb(),g.Mb(),g.Mb()}if(2&e){var i=n.$implicit,c=g.Xb();g.Ab(3),g.mc("background-color",i.color),g.Ab(1),g.cc("className",c.laneStyle(i.lane)),g.Ab(2),g.cc("innerHTML",g.Zb(7,18,i.svg),g.jc),g.Ab(6),g.rc(" ",i.sign?i.sign.gloss:g.Zb(13,20," sign not found")," "),g.Ab(3),g.cc("ngIf",i.totalmatches>1),g.Ab(3),g.ec("id","",i.id,"-left"),g.ec("name","name",i.id,""),g.cc("checked",c.Lane.Left===i.lane),g.Ab(1),g.ec("for","",i.id,"-left"),g.Ab(1),g.ec("id","",i.id,"-middle"),g.ec("name","name",i.id,""),g.cc("checked",c.Lane.Middle===i.lane),g.Ab(1),g.ec("for","",i.id,"-middle"),g.Ab(1),g.ec("id","",i.id,"-right"),g.ec("name","name",i.id,""),g.cc("checked",c.Lane.Right===i.lane),g.Ab(1),g.ec("for","",i.id,"-right")}}var A,L,E=((A=function(){function t(n,i,c,r,o,a,l){e(this,t),this.modalController=n,this.documentService=i,this.settingsService=c,this.subscriptionServiceNG=r,this.sentry=o,this.router=a,this.subscriptionServiceAndroid=l,this.Lane=M.a,this.subscriptionService=y.a.isNativePlatform()?l:r}var i,c,r;return i=t,(c=[{key:"ngOnInit",value:function(){var e=this;return Object(s.a)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return e.editedDocument={editedsigns:[]},n.next=3,e.settingsService.getFirstTime();case 3:if(n.t0=n.sent,null!=n.t0){n.next=6;break}return n.abrupt("return",e.router.navigateByUrl("/settings"));case 6:return n.next=8,e.documentService.loadSigns();case 8:e.documentService.clearDocument(),e.showDocument(e.documentService.getDocument());case 10:case"end":return n.stop()}},n)}))()}},{key:"ionViewWillEnter",value:function(){this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument())}},{key:"ngAfterViewInit",value:function(){var e=this;Object(m.a)(this.searchRef.nativeElement,"keyup").pipe(Object(f.a)(function(e){return e.target.value}),Object(h.a)(100),Object(p.a)()).subscribe(function(n){n&&n.includes("  ")&&(e.searchRef.nativeElement.value=e.searchRef.nativeElement.value.replace("  ","-"),n=n.replace("  ","-")),e.showAvailableWords(n),e.documentService.searchFrase(n),e.showDocument(e.documentService.getDocument()),e.scrollToBottom()})}},{key:"showAvailableWords",value:function(e){this.matchingWords=this.documentService.showAvailableWords(e)}},{key:"showDocument",value:function(e){this.editedDocument={editedsigns:e.signs}}},{key:"trackFound",value:function(e,n){return n?n.id:void 0}},{key:"addWord",value:function(e){var n=this.documentService.getSearchSentence().split(" ").filter(function(e){return""!==e&&" "!==e}),t=(n=n.slice(0,-1)).join(" ");this.documentService.searchFrase(t+" "+e),this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument()),this.matchingWords=[]}},{key:"accept",value:function(){return this.sentry.sentryMessage("Entered text : "+this.documentService.getSearchSentence()),this.router.navigateByUrl("/view")}},{key:"replace",value:function(e){var n=this;return Object(s.a)(regeneratorRuntime.mark(function t(){var i,c,r,o;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return i=n.documentService.getSearchWord(e),t.next=3,n.modalController.create({component:v.a,componentProps:{searchword:i}});case 3:return c=t.sent,t.next=6,c.present();case 6:return t.next=8,c.onDidDismiss();case 8:r=t.sent,(o=r.data)&&(n.documentService.replaceElement(e,o.result),n.showDocument(n.documentService.getDocument()),n.searchRef.nativeElement.value=n.documentService.getSearchSentence());case 11:case"end":return t.stop()}},t)}))()}},{key:"scrollToBottom",value:function(){var e=this;setTimeout(function(){e.content.scrollToBottom(200)},50)}},{key:"resetEntries",value:function(){}},{key:"laneStyle",value:function(e){switch(e){case M.a.Left:return"lane-left";case M.a.Right:return"lane-right";default:return"lane-middle"}}}])&&n(i.prototype,c),r&&n(i,r),t}()).\u0275fac=function(e){return new(e||A)(g.Kb(l.I),g.Kb(k.a),g.Kb(d.a),g.Kb(u.a),g.Kb(b.a),g.Kb(a.g),g.Kb(O.a))},A.\u0275cmp=g.Eb({type:A,selectors:[["app-edit"]],viewQuery:function(e,n){var t;1&e&&(g.uc(S,3,g.m),g.uc(C,3)),2&e&&(g.gc(t=g.Wb())&&(n.searchRef=t.first),g.gc(t=g.Wb())&&(n.content=t.first))},decls:27,vars:15,consts:[["slot","start"],[3,"placeholder"],["searchRef",""],[2,"display","none",3,"click"],["style","text-transform: none;",3,"click",4,"ngFor","ngForOf"],["padding","",1,"vertical-center"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","slot","fixed","vertical","bottom"],["name","caret-forward-circle-outline",2,"zoom","2",3,"click"],[2,"text-transform","none",3,"click"],["justify-content-center",""],["type","button",1,"editbutton",3,"click"],[3,"className"],[1,"sign"],[3,"innerHTML"],["size","10"],["size","1"],["color","light",4,"ngIf"],[1,"lane-selector"],["type","radio","value","left",3,"id","name","checked","change"],[1,"label-background","left",3,"for"],["type","radio","value","middle",3,"id","name","checked","change"],[1,"label-background","middle",3,"for"],["type","radio","value","right",3,"id","name","checked","change"],[1,"label-background","right",3,"for"],["color","light"]],template:function(e,n){1&e&&(g.Nb(0,"ion-header"),g.Nb(1,"ion-toolbar"),g.Nb(2,"ion-buttons",0),g.Lb(3,"ion-menu-button"),g.Mb(),g.Nb(4,"ion-title"),g.pc(5),g.Yb(6,"translate"),g.Mb(),g.Mb(),g.Nb(7,"ion-item"),g.Lb(8,"ion-textarea",1,2),g.Yb(10,"translate"),g.Nb(11,"ion-button",3),g.Vb("click",function(){return n.resetEntries()}),g.pc(12),g.Yb(13,"translate"),g.Mb(),g.Mb(),g.Nb(14,"ion-item"),g.Nb(15,"div"),g.nc(16,P,2,1,"ion-button",4),g.Mb(),g.Mb(),g.Mb(),g.Nb(17,"ion-content",5,6),g.Nb(19,"ion-list"),g.nc(20,_,24,22,"ion-item",7),g.Mb(),g.Nb(21,"ion-fab",8),g.Nb(22,"ion-label"),g.pc(23),g.Yb(24,"translate"),g.Mb(),g.Nb(25,"ion-fab-button"),g.Nb(26,"ion-icon",9),g.Vb("click",function(){return n.accept()}),g.Mb(),g.Mb(),g.Mb(),g.Mb()),2&e&&(g.Ab(5),g.qc(g.Zb(6,7,"Edit")),g.Ab(3),g.dc("placeholder",g.Zb(10,9,"Enter sentence")),g.Ab(4),g.rc(" ",g.Zb(13,11,"Reset")," "),g.Ab(4),g.cc("ngForOf",n.matchingWords),g.Ab(4),g.cc("ngForOf",n.editedDocument.editedsigns)("ngForTrackBy",n.trackFound),g.Ab(3),g.qc(g.Zb(24,13,"Next")))},directives:[l.l,l.E,l.e,l.s,l.D,l.n,l.C,l.N,l.d,r.j,l.g,l.p,l.h,l.o,l.i,l.m,l.k,l.y,l.f,r.k,l.c],pipes:[w.c,N.a],styles:[".sign[_ngcontent-%COMP%]{padding:0}.editbutton[_ngcontent-%COMP%]{margin:5px}.lane-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.left[_ngcontent-%COMP%]{background-image:url(Left.be0fb9308787483df32e.png)}.middle[_ngcontent-%COMP%]{background-image:url(Center.c4ba7825880434b3be70.png)}.right[_ngcontent-%COMP%]{background-image:url(Right.eaf043f9ce149fa15603.png)}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.2) grayscale(.5) opacity(.9);filter:brightness(1.2) grayscale(.5) opacity(.9);background-color:#397ac4}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.8) grayscale(1) opacity(.7);filter:brightness(1.8) grayscale(1) opacity(.7)}.label-background[_ngcontent-%COMP%]{cursor:pointer;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline-block;margin:0 2px;width:45px;height:45px;transition:all .1s ease-in}.lane-left[_ngcontent-%COMP%]{padding-right:40px}.lane-middle[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.lane-right[_ngcontent-%COMP%]{padding-left:40px}.item-text-center[_ngcontent-%COMP%]{display:-moz-flex;-moz-align-items:center;position:absolute;top:0;height:100%}.item-text-center[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{display:flex;align-items:center}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{max-width:300px;width:100%;margin:auto;text-align:center}"]}),A),D=c("iTUp"),R=c("PCNd"),F=[{path:"",component:E}],j=((L=function n(){e(this,n)}).\u0275fac=function(e){return new(e||L)},L.\u0275mod=g.Ib({type:L}),L.\u0275inj=g.Hb({imports:[[r.c,o.a,l.F,a.j.forChild(F),D.a,R.a]]}),L)}}])}();
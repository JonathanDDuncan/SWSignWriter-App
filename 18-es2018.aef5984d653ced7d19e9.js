(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/Obv":function(t,e,n){"use strict";n.r(e),n.d(e,"StripesuccessPageModule",function(){return f});var r=n("sYmb"),i=n("ofXK"),s=n("3Pt+"),o=n("tyNb"),a=n("TEn/"),c=n("HaE+"),b=n("Xo/0"),u=n("qkCY"),p=n("KQF2"),l=n("fXoL"),m=n("tk/3");const d=[{path:"",component:(()=>{class t{constructor(t,e,n,r,i,s){this.http=t,this.storage=e,this.route=n,this.stripeservice=r,this.router=i,this.httpService=s}ngOnInit(){var t=this;return Object(c.a)(function*(){const e=yield t.storage.GetCurrentUserProfile();e&&null!==e||t.router.navigate(["/login"]),yield t.getSubscriptionInfo();var n=yield t.storage.GetJWTToken();t.httpService.SaveUserSubscription(n,!0,"stripe")})()}getSubscriptionInfo(){var t=this;return Object(c.a)(function*(){const e=yield t.storage.GetCurrentUserProfile();e&&null!==e&&t.route.queryParamMap.subscribe(function(){var n=Object(c.a)(function*(n){const r=n.params.session_id;yield t.stripeservice.GetandSaveStripeSubscriptionData(e.email,r);const i=yield t.storage.GetSubscription(e.email);if(i){const e=new Date(i.endDate),n=new Intl.DateTimeFormat("en",{year:"numeric"}).format(e),r=new Intl.DateTimeFormat("en",{month:"short"}).format(e),s=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(e);t.subscriptionEndDate=`${s}-${r}-${n}`}});return function(t){return n.apply(this,arguments)}}())})()}}return t.\u0275fac=function(e){return new(e||t)(l.Kb(m.a),l.Kb(u.a),l.Kb(o.a),l.Kb(b.a),l.Kb(o.g),l.Kb(p.a))},t.\u0275cmp=l.Eb({type:t,selectors:[["app-stripesuccess"]],decls:14,vars:10,consts:[["slot","start"],["slot","icon-only","name","menu"]],template:function(t,e){1&t&&(l.pc(0,"."),l.Nb(1,"ion-header"),l.Nb(2,"ion-toolbar"),l.Nb(3,"ion-buttons",0),l.Nb(4,"ion-menu-toggle"),l.Nb(5,"ion-button"),l.Lb(6,"ion-icon",1),l.Mb(),l.Mb(),l.Mb(),l.Nb(7,"ion-title"),l.pc(8),l.Yb(9,"translate"),l.Mb(),l.Mb(),l.Mb(),l.Nb(10,"ion-content"),l.pc(11),l.Yb(12,"translate"),l.Yb(13,"translate"),l.Mb()),2&t&&(l.Ab(8),l.qc(l.Zb(9,4,"Stripe Success")),l.Ab(3),l.tc(" ",l.Zb(12,6,"Your purchase was a success.")," ",l.Zb(13,8,"Your subscription will renew on")," ",e.subscriptionEndDate,"\n"))},directives:[a.l,a.E,a.e,a.t,a.d,a.m,a.D,a.g],pipes:[r.c],styles:[""]}),t})()}];let f=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=l.Ib({type:t}),t.\u0275inj=l.Hb({imports:[[i.c,s.a,a.F,r.b,o.j.forChild(d)]]}),t})()}}]);
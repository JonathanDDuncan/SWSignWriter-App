!function(){function e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{"/Obv":function(n,r,a){"use strict";a.r(r),a.d(r,"StripesuccessPageModule",function(){return d});var o,i,s=a("sYmb"),c=a("ofXK"),u=a("3Pt+"),b=a("tyNb"),p=a("TEn/"),f=a("HaE+"),l=a("Xo/0"),m=a("qkCY"),h=a("KQF2"),v=a("fXoL"),g=a("tk/3"),w=[{path:"",component:(o=function(){function n(t,r,a,o,i,s){e(this,n),this.http=t,this.storage=r,this.route=a,this.stripeservice=o,this.router=i,this.httpService=s}var r,a,o;return r=n,(a=[{key:"ngOnInit",value:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.storage.GetCurrentUserProfile();case 2:return(n=t.sent)&&null!==n||e.router.navigate(["/login"]),t.next=6,e.getSubscriptionInfo();case 6:return t.next=8,e.storage.GetJWTToken();case 8:r=t.sent,e.httpService.SaveUserSubscription(r,!0,"stripe");case 10:case"end":return t.stop()}},t)}))()}},{key:"getSubscriptionInfo",value:function(){var e=this;return Object(f.a)(regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.storage.GetCurrentUserProfile();case 2:(n=t.sent)&&null!==n&&e.route.queryParamMap.subscribe(function(){var t=Object(f.a)(regeneratorRuntime.mark(function t(r){var a,o,i,s,c,u;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return a=r.params.session_id,t.next=3,e.stripeservice.GetandSaveStripeSubscriptionData(n.email,a);case 3:return t.next=5,e.storage.GetSubscription(n.email);case 5:(o=t.sent)&&(i=new Date(o.endDate),s=new Intl.DateTimeFormat("en",{year:"numeric"}).format(i),c=new Intl.DateTimeFormat("en",{month:"short"}).format(i),u=new Intl.DateTimeFormat("en",{day:"2-digit"}).format(i),e.subscriptionEndDate="".concat(u,"-").concat(c,"-").concat(s));case 7:case"end":return t.stop()}},t)}));return function(e){return t.apply(this,arguments)}}());case 4:case"end":return t.stop()}},t)}))()}}])&&t(r.prototype,a),o&&t(r,o),n}(),o.\u0275fac=function(e){return new(e||o)(v.Kb(g.a),v.Kb(m.a),v.Kb(b.a),v.Kb(l.a),v.Kb(b.g),v.Kb(h.a))},o.\u0275cmp=v.Eb({type:o,selectors:[["app-stripesuccess"]],decls:14,vars:10,consts:[["slot","start"],["slot","icon-only","name","menu"]],template:function(e,t){1&e&&(v.pc(0,"."),v.Nb(1,"ion-header"),v.Nb(2,"ion-toolbar"),v.Nb(3,"ion-buttons",0),v.Nb(4,"ion-menu-toggle"),v.Nb(5,"ion-button"),v.Lb(6,"ion-icon",1),v.Mb(),v.Mb(),v.Mb(),v.Nb(7,"ion-title"),v.pc(8),v.Yb(9,"translate"),v.Mb(),v.Mb(),v.Mb(),v.Nb(10,"ion-content"),v.pc(11),v.Yb(12,"translate"),v.Yb(13,"translate"),v.Mb()),2&e&&(v.Ab(8),v.qc(v.Zb(9,4,"Stripe Success")),v.Ab(3),v.tc(" ",v.Zb(12,6,"Your purchase was a success.")," ",v.Zb(13,8,"Your subscription will renew on")," ",t.subscriptionEndDate,"\n"))},directives:[p.l,p.E,p.e,p.t,p.d,p.m,p.D,p.g],pipes:[s.c],styles:[""]}),o)}],d=((i=function t(){e(this,t)}).\u0275fac=function(e){return new(e||i)},i.\u0275mod=v.Ib({type:i}),i.\u0275inj=v.Hb({imports:[[c.c,u.a,p.F,s.b,b.j.forChild(w)]]}),i)}}])}();
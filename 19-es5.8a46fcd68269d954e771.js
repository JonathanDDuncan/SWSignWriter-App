!function(){function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{HCc4:function(n,r,i){"use strict";i.r(r),i.d(r,"SubscribeAndroidPageModule",function(){return I});var c=i("sYmb"),a=i("ofXK"),s=i("3Pt+"),o=i("tyNb"),u=i("TEn/"),b=i("HaE+"),l=i("qkCY"),f=i("VUXs"),p=i("KH6c"),h=i("Blvj"),v=i("fXoL");function d(t,e){1&t&&(v.Nb(0,"p"),v.pc(1,"You can start a 15 day free trial"),v.Mb())}function g(t,e){if(1&t){var n=v.Ob();v.Nb(0,"ion-button",7),v.Vb("click",function(){return v.ic(n),v.Xb().StartTrial()}),v.pc(1),v.Yb(2,"translate"),v.Mb()}2&t&&(v.Ab(1),v.rc("",v.Zb(2,1,"Start Trial")," "))}function S(t,e){if(1&t&&(v.Nb(0,"p"),v.pc(1),v.Mb()),2&t){var n=v.Xb();v.Ab(1),v.rc("Your free trial has ",n.trialDaysLeft," days left")}}function w(t,e){if(1&t){var n=v.Ob();v.Nb(0,"ion-button",7),v.Vb("click",function(){v.ic(n);var t=v.Xb().$implicit;return v.Xb(2).purchase(t)}),v.pc(1),v.Yb(2,"translate"),v.Mb()}2&t&&(v.Ab(1),v.rc("",v.Zb(2,1,"Subscribe Now")," "))}function m(t,e){if(1&t&&(v.Nb(0,"p"),v.pc(1,"You Own This Subscription"),v.Mb(),v.Nb(2,"p"),v.pc(3),v.Yb(4,"translate"),v.Mb()),2&t){var n=v.Xb().$implicit;v.Ab(3),v.sc("",v.Zb(4,2,"Your subscription is valid until and will renew on")," ",n.expiryDate," ")}}function k(t,e){if(1&t&&(v.Nb(0,"div",9),v.Nb(1,"p"),v.pc(2),v.Mb(),v.Nb(3,"p"),v.pc(4),v.Mb(),v.Nb(5,"p"),v.pc(6),v.Mb(),v.nc(7,w,3,3,"ion-button",10),v.nc(8,m,5,4,"ng-template",null,11,v.oc),v.Lb(10,"hr"),v.Mb()),2&t){var n=e.$implicit,r=v.hc(9);v.Ab(2),v.rc(" ",n.title,""),v.Ab(2),v.qc(n.description),v.Ab(2),v.sc("",n.price," ",n.currency,""),v.Ab(1),v.cc("ngIf",!n.owned)("ngIfElse",r)}}function y(t,e){if(1&t&&(v.Nb(0,"div"),v.nc(1,k,11,6,"div",8),v.Mb()),2&t){var n=v.Xb();v.Ab(1),v.cc("ngForOf",n.products)}}function T(t,e){1&t&&(v.Nb(0,"p"),v.pc(1,"Yoou own a Stripe Subscription"),v.Mb())}function M(t,e){if(1&t){var n=v.Ob();v.Nb(0,"ion-button",12),v.Vb("click",function(){return v.ic(n),v.Xb().restore()}),v.pc(1,"Refresh"),v.Mb()}}var N,x,A=[{path:"",component:(N=function(){function n(e,r,i,c,a,s,o){t(this,n),this.storage=e,this.alertController=r,this.translateService=i,this.platform=c,this.store=a,this.subscriptionService=s,this.trialService=o,this.buttonDisabled=null,this.products=[],this.showTrialButton=!1,this.hasStartedTrial=!1,this.trialDaysLeft=0,this.store.verbosity=this.store.DEBUG,this.products=this.subscriptionService.getProducts()}var r,i,c;return r=n,(i=[{key:"ngOnInit",value:function(){var t=this;return Object(b.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.ShowTrialButton();case 2:case"end":return e.stop()}},e)}))()}},{key:"ShowTrialButton",value:function(){var t=this;return Object(b.a)(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.GetCurrentUserProfile();case 2:return n=e.sent,e.next=5,t.trialService.HasStartedTrial(n.sub);case 5:if(t.hasStartedTrial=e.sent,t.showTrialButton=!t.subscriptionService.isSubscribed.getValue()&&!t.hasStartedTrial,e.t0=t.hasStartedTrial,!e.t0){e.next=12;break}return e.next=11,t.trialService.GetTrialDaysLeft(n.sub);case 11:t.trialDaysLeft=e.sent;case 12:case"end":return e.stop()}},e)}))()}},{key:"StartTrial",value:function(){var t=this;return Object(b.a)(regeneratorRuntime.mark(function e(){var n;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.storage.GetCurrentUserProfile();case 2:return n=e.sent,e.next=5,t.trialService.StartTrial(n.sub);case 5:if(e.t0=e.sent.TrialStartDate,e.t1=null!==e.t0,!e.t1){e.next=9;break}t.showAlert(),t.ShowTrialButton();case 9:case"end":return e.stop()}},e)}))()}},{key:"CheckSubscription",value:function(){var t=this;return Object(b.a)(regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t.subscriptionService.checkSubscription();case 1:case"end":return e.stop()}},e)}))()}},{key:"restore",value:function(){this.subscriptionService.restore()}},{key:"showAlert",value:function(){var t=this;return Object(b.a)(regeneratorRuntime.mark(function e(){var n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.alertController.create({header:"Alert",subHeader:"SubTitle",message:"This is an alert message",buttons:["OK"]});case 2:return n=e.sent,e.next=5,n.present();case 5:return e.next=7,n.onDidDismiss();case 7:r=e.sent,console.log(r);case 9:case"end":return e.stop()}},e)}))()}},{key:"SetButtonDisabled",value:function(t){var e=new Date(t)>=new Date;this.buttonDisabled=e}},{key:"purchase",value:function(t){var e=this;return Object(b.a)(regeneratorRuntime.mark(function n(){return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:e.subscriptionService.purchase(t.id);case 1:case"end":return n.stop()}},n)}))()}}])&&e(r.prototype,i),c&&e(r,c),n}(),N.\u0275fac=function(t){return new(t||N)(v.Kb(l.a),v.Kb(u.a),v.Kb(c.d),v.Kb(u.J),v.Kb(f.a),v.Kb(p.a),v.Kb(h.a))},N.\u0275cmp=v.Eb({type:N,selectors:[["app-subscribeAndroid"]],decls:21,vars:9,consts:[["slot","start"],["slot","icon-only","name","menu"],[4,"ngIf"],[3,"click",4,"ngIf"],[4,"ngIf","ngIfElse"],["stripeSubscribed",""],["expand","full",3,"click",4,"ngIf"],[3,"click"],["detail","false",4,"ngFor","ngForOf"],["detail","false"],[3,"click",4,"ngIf","ngIfElse"],["owned",""],["expand","full",3,"click"]],template:function(t,e){if(1&t&&(v.Nb(0,"ion-header"),v.Nb(1,"ion-toolbar"),v.Nb(2,"ion-buttons",0),v.Nb(3,"ion-menu-toggle"),v.Nb(4,"ion-button"),v.Lb(5,"ion-icon",1),v.Mb(),v.Mb(),v.Mb(),v.Nb(6,"ion-title"),v.pc(7),v.Yb(8,"translate"),v.Mb(),v.Mb(),v.Mb(),v.Nb(9,"ion-content"),v.Nb(10,"ion-row"),v.Nb(11,"ion-col"),v.Nb(12,"div"),v.nc(13,d,2,0,"p",2),v.nc(14,g,3,3,"ion-button",3),v.nc(15,S,2,1,"p",2),v.Mb(),v.nc(16,y,2,1,"div",4),v.nc(17,T,2,0,"ng-template",null,5,v.oc),v.Mb(),v.Mb(),v.nc(19,M,2,0,"ion-button",6),v.pc(20,"'\n"),v.Mb()),2&t){var n=v.hc(18);v.Ab(7),v.qc(v.Zb(8,7,"Subscribe")),v.Ab(6),v.cc("ngIf",e.showTrialButton),v.Ab(1),v.cc("ngIf",e.showTrialButton),v.Ab(1),v.cc("ngIf",e.hasStartedTrial&&e.trialDaysLeft>0&&!e.subscriptionService.isSubscribed.getValue()),v.Ab(1),v.cc("ngIf",!("Stripe"===e.subscriptionService.subscriptionType))("ngIfElse",n),v.Ab(3),v.cc("ngIf",!("Stripe"===e.subscriptionService.subscriptionType))}},directives:[u.l,u.E,u.e,u.t,u.d,u.m,u.D,u.g,u.y,u.f,a.k,a.j],pipes:[c.c],styles:["ion-col[_ngcontent-%COMP%]{text-align:center}"]}),N)}],I=((x=function e(){t(this,e)}).\u0275fac=function(t){return new(t||x)},x.\u0275mod=v.Ib({type:x}),x.\u0275inj=v.Hb({imports:[[a.c,s.a,u.F,c.b,o.j.forChild(A)]]}),x)}}])}();
(window.webpackJsonp=window.webpackJsonp||[]).push([[65],{zFnc:function(e,t,n){"use strict";n.r(t),n.d(t,"EditPageModule",function(){return L});var i=n("ofXK"),c=n("3Pt+"),o=n("tyNb"),r=n("TEn/"),a=n("3CEA"),s=n("gtzJ"),l=n("fXoL");a.a({dsn:"https://2366578d65db483c829fcdf83879c8c9@sentry.io/5189477"});let b=(()=>{class e{constructor(){}sentryMessage(e){s.b(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=l.Gb({token:e,factory:e.\u0275fac,providedIn:"root"}),e})();var d=n("O+7k"),g=n("xgIS"),u=n("lJxs"),h=n("Kj3r"),m=n("/uUt"),p=n("ACu4"),f=n("Q/j7"),M=n("2/4T"),v=n("iXKo"),y=n("sYmb"),k=n("ZJwn");const O=["searchRef"],S=["content"];function w(e,t){if(1&e){const e=l.Ob();l.Nb(0,"ion-button",12),l.Vb("click",function(){l.ic(e);const n=t.$implicit;return l.Xb().addWord(n.gloss)}),l.pc(1),l.Mb()}if(2&e){const e=t.$implicit;l.Ab(1),l.rc(" ",e.gloss," ")}}function N(e,t){if(1&e&&(l.Nb(0,"ion-badge",28),l.pc(1),l.Mb()),2&e){const e=l.Xb().$implicit;l.Ab(1),l.qc(e.totalmatches)}}function C(e,t){if(1&e){const e=l.Ob();l.Nb(0,"ion-item"),l.Nb(1,"ion-grid"),l.Nb(2,"ion-row",13),l.Nb(3,"button",14),l.Vb("click",function(){l.ic(e);const n=t.index;return l.Xb().replace(n)}),l.Nb(4,"div",15),l.Nb(5,"div",16),l.Lb(6,"span",17),l.Yb(7,"safeHtml"),l.Nb(8,"ion-grid"),l.Nb(9,"ion-row"),l.Nb(10,"ion-col",18),l.Nb(11,"p"),l.pc(12),l.Yb(13,"translate"),l.Mb(),l.Mb(),l.Nb(14,"ion-col",19),l.nc(15,N,2,1,"ion-badge",20),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Mb(),l.Nb(16,"ion-row",13),l.Nb(17,"div",21),l.Nb(18,"input",22),l.Vb("change",function(){l.ic(e);const n=t.$implicit,i=l.Xb();return n.lane=i.Lane.Left}),l.Mb(),l.Lb(19,"label",23),l.Nb(20,"input",24),l.Vb("change",function(){l.ic(e);const n=t.$implicit,i=l.Xb();return n.lane=i.Lane.Middle}),l.Mb(),l.Lb(21,"label",25),l.Nb(22,"input",26),l.Vb("change",function(){l.ic(e);const n=t.$implicit,i=l.Xb();return n.lane=i.Lane.Right}),l.Mb(),l.Lb(23,"label",27),l.Mb(),l.Mb(),l.Mb(),l.Mb()}if(2&e){const e=t.$implicit,n=l.Xb();l.Ab(3),l.mc("background-color",e.color),l.Ab(1),l.cc("className",n.laneStyle(e.lane)),l.Ab(2),l.cc("innerHTML",l.Zb(7,18,e.svg),l.jc),l.Ab(6),l.rc(" ",e.sign?e.sign.gloss:l.Zb(13,20," sign not found")," "),l.Ab(3),l.cc("ngIf",e.totalmatches>1),l.Ab(3),l.ec("id","",e.id,"-left"),l.ec("name","name",e.id,""),l.cc("checked",n.Lane.Left===e.lane),l.Ab(1),l.ec("for","",e.id,"-left"),l.Ab(1),l.ec("id","",e.id,"-middle"),l.ec("name","name",e.id,""),l.cc("checked",n.Lane.Middle===e.lane),l.Ab(1),l.ec("for","",e.id,"-middle"),l.Ab(1),l.ec("id","",e.id,"-right"),l.ec("name","name",e.id,""),l.cc("checked",n.Lane.Right===e.lane),l.Ab(1),l.ec("for","",e.id,"-right")}}let P=(()=>{class e{constructor(e,t,n,i,c,o){this.modalController=e,this.documentService=t,this.settingsService=n,this.sentry=i,this.router=c,this.logService=o,this.Lane=f.a}async ngOnInit(){if(this.editedDocument={editedsigns:[]},null==await this.settingsService.getFirstTime())return this.router.navigateByUrl("/settings");await this.documentService.loadSigns(),this.documentService.clearDocument(),this.showDocument(this.documentService.getDocument())}ionViewWillEnter(){this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument())}ngAfterViewInit(){Object(g.a)(this.searchRef.nativeElement,"keyup").pipe(Object(u.a)(e=>e.target.value),Object(h.a)(100),Object(m.a)()).subscribe(e=>{e&&e.includes("  ")&&(this.searchRef.nativeElement.value=this.searchRef.nativeElement.value.replace("  ","-"),e=e.replace("  ","-")),this.showAvailableWords(e),this.documentService.searchFrase(e),this.showDocument(this.documentService.getDocument()),this.scrollToBottom()})}showAvailableWords(e){this.matchingWords=this.documentService.showAvailableWords(e)}showDocument(e){this.editedDocument={editedsigns:e.signs}}trackFound(e,t){return t?t.id:void 0}addWord(e){let t=this.documentService.getSearchSentence().split(" ").filter(e=>""!==e&&" "!==e);t=t.slice(0,-1);const n=t.join(" ");this.documentService.searchFrase(n+" "+e),this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument()),this.matchingWords=[]}accept(){return this.sentry.sentryMessage("Entered text : "+this.documentService.getSearchSentence()),this.logService.AddLog("Entered text : "+this.documentService.getSearchSentence()),this.router.navigateByUrl("/view")}async replace(e){const t=this.documentService.getSearchWord(e),n=await this.modalController.create({component:p.a,componentProps:{searchword:t}});await n.present();const{data:i}=await n.onDidDismiss();i&&(this.documentService.replaceElement(e,i.result),this.showDocument(this.documentService.getDocument()),this.searchRef.nativeElement.value=this.documentService.getSearchSentence())}scrollToBottom(){setTimeout(()=>{this.content.scrollToBottom(200)},50)}resetEntries(){}laneStyle(e){switch(e){case f.a.Left:return"lane-left";case f.a.Right:return"lane-right";default:return"lane-middle"}}}return e.\u0275fac=function(t){return new(t||e)(l.Kb(r.K),l.Kb(M.a),l.Kb(d.a),l.Kb(b),l.Kb(o.g),l.Kb(v.a))},e.\u0275cmp=l.Eb({type:e,selectors:[["app-edit"]],viewQuery:function(e,t){if(1&e&&(l.tc(O,3,l.m),l.tc(S,3)),2&e){let e;l.gc(e=l.Wb())&&(t.searchRef=e.first),l.gc(e=l.Wb())&&(t.content=e.first)}},decls:27,vars:15,consts:[["color","navy"],["slot","start"],[3,"placeholder"],["searchRef",""],[2,"display","none",3,"click"],["color","green","style","text-transform: none;",3,"click",4,"ngFor","ngForOf"],["padding","",1,"vertical-center"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","slot","fixed","vertical","bottom"],["color","green"],["name","caret-forward-circle-outline",2,"zoom","2",3,"click"],["color","green",2,"text-transform","none",3,"click"],["justify-content-center",""],["type","button",1,"editbutton",3,"click"],[3,"className"],[1,"sign"],[3,"innerHTML"],["size","10"],["size","1"],["color","light",4,"ngIf"],[1,"lane-selector"],["type","radio","value","left",3,"id","name","checked","change"],[1,"label-background","left",3,"for"],["type","radio","value","middle",3,"id","name","checked","change"],[1,"label-background","middle",3,"for"],["type","radio","value","right",3,"id","name","checked","change"],[1,"label-background","right",3,"for"],["color","light"]],template:function(e,t){1&e&&(l.Nb(0,"ion-header"),l.Nb(1,"ion-toolbar",0),l.Nb(2,"ion-buttons",1),l.Lb(3,"ion-menu-button"),l.Mb(),l.Nb(4,"ion-title"),l.pc(5),l.Yb(6,"translate"),l.Mb(),l.Mb(),l.Nb(7,"ion-item"),l.Lb(8,"ion-textarea",2,3),l.Yb(10,"translate"),l.Nb(11,"ion-button",4),l.Vb("click",function(){return t.resetEntries()}),l.pc(12),l.Yb(13,"translate"),l.Mb(),l.Mb(),l.Nb(14,"ion-item"),l.Nb(15,"div"),l.nc(16,w,2,1,"ion-button",5),l.Mb(),l.Mb(),l.Mb(),l.Nb(17,"ion-content",6,7),l.Nb(19,"ion-list"),l.nc(20,C,24,22,"ion-item",8),l.Mb(),l.Nb(21,"ion-fab",9),l.Nb(22,"ion-label"),l.pc(23),l.Yb(24,"translate"),l.Mb(),l.Nb(25,"ion-fab-button",10),l.Nb(26,"ion-icon",11),l.Vb("click",function(){return t.accept()}),l.Mb(),l.Mb(),l.Mb(),l.Mb()),2&e&&(l.Ab(5),l.qc(l.Zb(6,7,"Edit")),l.Ab(3),l.dc("placeholder",l.Zb(10,9,"Enter sentence")),l.Ab(4),l.rc(" ",l.Zb(13,11,"Reset")," "),l.Ab(4),l.cc("ngForOf",t.matchingWords),l.Ab(4),l.cc("ngForOf",t.editedDocument.editedsigns)("ngForTrackBy",t.trackFound),l.Ab(3),l.qc(l.Zb(24,13,"Next")))},directives:[r.m,r.G,r.f,r.u,r.F,r.p,r.E,r.P,r.e,i.h,r.h,r.r,r.i,r.q,r.j,r.n,r.l,r.A,r.g,i.i,r.d],pipes:[y.c,k.a],styles:[".sign[_ngcontent-%COMP%]{padding:0}.editbutton[_ngcontent-%COMP%]{margin:5px}.lane-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.left[_ngcontent-%COMP%]{background-image:url(Left.be0fb9308787483df32e.png)}.middle[_ngcontent-%COMP%]{background-image:url(Center.c4ba7825880434b3be70.png)}.right[_ngcontent-%COMP%]{background-image:url(Right.eaf043f9ce149fa15603.png)}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.2) grayscale(.5) opacity(.9);filter:brightness(1.2) grayscale(.5) opacity(.9);background-color:#397ac4}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.8) grayscale(1) opacity(.7);filter:brightness(1.8) grayscale(1) opacity(.7)}.label-background[_ngcontent-%COMP%]{cursor:pointer;background-size:contain;background-position:50%;background-repeat:no-repeat;display:inline-block;margin:0 2px;width:45px;height:45px;transition:all .1s ease-in}.lane-left[_ngcontent-%COMP%]{padding-right:40px}.lane-middle[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.lane-right[_ngcontent-%COMP%]{padding-left:40px}.item-text-center[_ngcontent-%COMP%]{display:-moz-flex;display:flex;-moz-align-items:center;align-items:center;position:absolute;top:0;height:100%}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{display:flex;align-items:center}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{max-width:300px;width:100%;margin:auto;text-align:center}"]}),e})();var _=n("iTUp"),x=n("PCNd");const A=[{path:"",component:P}];let L=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275mod=l.Ib({type:e}),e.\u0275inj=l.Hb({imports:[[i.b,c.b,r.H,o.i.forChild(A),_.a,x.a]]}),e})()}}]);
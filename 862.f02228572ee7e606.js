"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[862],{862:(z,u,o)=>{o.r(u),o.d(u,{EditPageModule:()=>U});var d=o(6895),p=o(4719),m=o(9990),c=o(603),h=o(5861),f=o(7066),v=o(8076),e=o(4650);f.S1({dsn:"https://2366578d65db483c829fcdf83879c8c9@sentry.io/5189477"});let x=(()=>{class i{constructor(){}sentryMessage(t){v.uT(t)}}return i.\u0275fac=function(t){return new(t||i)},i.\u0275prov=e.Yz7({token:i,factory:i.\u0275fac,providedIn:"root"}),i})();var y=o(722),C=o(3753),M=o(4850),P=o(13),S=o(5778),Z=o(7786),g=o(5848),b=o(5362),T=o(9331),_=o(3263),E=o(7171);const O=["searchRef"],A=["content"];function k(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-button",12),e.NdJ("click",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(a.addWord(s.gloss))}),e._uU(1),e.qZA()}if(2&i){const t=l.$implicit;e.xp6(1),e.hij(" ",t.gloss," ")}}function F(i,l){if(1&i&&(e.TgZ(0,"ion-badge",28),e._uU(1),e.qZA()),2&i){const t=e.oxw().$implicit;e.xp6(1),e.Oqu(t.totalmatches)}}function L(i,l){if(1&i){const t=e.EpF();e.TgZ(0,"ion-item")(1,"ion-grid")(2,"ion-row",13)(3,"button",14),e.NdJ("click",function(){const s=e.CHM(t).index,a=e.oxw();return e.KtG(a.replace(s))}),e.TgZ(4,"div",15)(5,"div",16),e._UZ(6,"span",17),e.ALo(7,"safeHtml"),e.TgZ(8,"ion-grid")(9,"ion-row")(10,"ion-col",18)(11,"p"),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"ion-col",19),e.YNc(15,F,2,1,"ion-badge",20),e.qZA()()()()()()(),e.TgZ(16,"ion-row",13)(17,"div",21)(18,"input",22),e.NdJ("change",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(s.lane=a.Lane.Left)}),e.qZA(),e._UZ(19,"label",23),e.TgZ(20,"input",24),e.NdJ("change",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(s.lane=a.Lane.Middle)}),e.qZA(),e._UZ(21,"label",25),e.TgZ(22,"input",26),e.NdJ("change",function(){const s=e.CHM(t).$implicit,a=e.oxw();return e.KtG(s.lane=a.Lane.Right)}),e.qZA(),e._UZ(23,"label",27),e.qZA()()()()}if(2&i){const t=l.$implicit,n=e.oxw();e.xp6(3),e.Udp("background-color",t.color),e.xp6(1),e.Q6J("className",n.laneStyle(t.lane)),e.xp6(2),e.Q6J("innerHTML",e.lcZ(7,18,t.svg),e.oJD),e.xp6(6),e.hij(" ",t.sign?t.sign.gloss:e.lcZ(13,20," sign not found")," "),e.xp6(3),e.Q6J("ngIf",t.totalmatches>1),e.xp6(3),e.MGl("id","",t.id,"-left")("name","name",t.id,""),e.Q6J("checked",n.Lane.Left===t.lane),e.xp6(1),e.MGl("for","",t.id,"-left"),e.xp6(1),e.MGl("id","",t.id,"-middle")("name","name",t.id,""),e.Q6J("checked",n.Lane.Middle===t.lane),e.xp6(1),e.MGl("for","",t.id,"-middle"),e.xp6(1),e.MGl("id","",t.id,"-right")("name","name",t.id,""),e.Q6J("checked",n.Lane.Right===t.lane),e.xp6(1),e.MGl("for","",t.id,"-right")}}let D=(()=>{class i{constructor(t,n,r,s,a,w){this.modalController=t,this.documentService=n,this.settingsService=r,this.sentry=s,this.router=a,this.logService=w,this.Lane=g.o}ngOnInit(){var t=this;return(0,h.Z)(function*(){if(t.editedDocument={editedsigns:[]},null==(yield t.settingsService.getFirstTime()))return t.router.navigateByUrl("/settings");yield t.documentService.loadSigns(),t.documentService.clearDocument(),t.showDocument(t.documentService.getDocument())})()}ionViewWillEnter(){this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument())}ngAfterViewInit(){(0,C.R)(this.searchRef.nativeElement,"keyup").pipe((0,M.U)(t=>t.target.value),(0,P.b)(100),(0,S.x)()).subscribe(t=>{t&&t.includes("  ")&&(this.searchRef.nativeElement.value=this.searchRef.nativeElement.value.replace("  ","-"),t=t.replace("  ","-")),this.showAvailableWords(t),this.documentService.searchFrase(t),this.showDocument(this.documentService.getDocument()),this.scrollToBottom()})}showAvailableWords(t){this.matchingWords=this.documentService.showAvailableWords(t)}showDocument(t){this.editedDocument={editedsigns:t.signs}}trackFound(t,n){return n?n.id:void 0}addWord(t){let r=this.documentService.getSearchSentence().split(" ").filter(a=>""!==a&&" "!==a);r=r.slice(0,-1);const s=r.join(" ");this.documentService.searchFrase(s+" "+t),this.searchRef.nativeElement.value=this.documentService.getSearchSentence(),this.showDocument(this.documentService.getDocument()),this.matchingWords=[]}accept(){return this.sentry.sentryMessage("Entered text : "+this.documentService.getSearchSentence()),this.logService.AddLog("Entered text : "+this.documentService.getSearchSentence()),this.router.navigateByUrl("/view")}replace(t){var n=this;return(0,h.Z)(function*(){const r=n.documentService.getSearchWord(t),s=yield n.modalController.create({component:Z.z,componentProps:{searchword:r}});yield s.present();const{data:a}=yield s.onDidDismiss();a&&(n.documentService.replaceElement(t,a.result),n.showDocument(n.documentService.getDocument()),n.searchRef.nativeElement.value=n.documentService.getSearchSentence())})()}scrollToBottom(){setTimeout(()=>{this.content.scrollToBottom(200)},50)}resetEntries(){}laneStyle(t){switch(t){case g.o.Left:return"lane-left";case g.o.Right:return"lane-right";default:return"lane-middle"}}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(c.IN),e.Y36(T.Z),e.Y36(y.g),e.Y36(x),e.Y36(m.F0),e.Y36(b.$))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-edit"]],viewQuery:function(t,n){if(1&t&&(e.Gf(O,7,e.SBq),e.Gf(A,7)),2&t){let r;e.iGM(r=e.CRH())&&(n.searchRef=r.first),e.iGM(r=e.CRH())&&(n.content=r.first)}},decls:27,vars:15,consts:[["color","navy"],["slot","start"],[3,"placeholder"],["searchRef",""],[2,"display","none",3,"click"],["color","green","style","text-transform: none;",3,"click",4,"ngFor","ngForOf"],["padding","",1,"vertical-center"],["content",""],[4,"ngFor","ngForOf","ngForTrackBy"],["horizontal","end","slot","fixed","vertical","bottom"],["color","green"],["name","caret-forward-circle-outline",2,"zoom","2",3,"click"],["color","green",2,"text-transform","none",3,"click"],["justify-content-center",""],["type","button",1,"editbutton",3,"click"],[3,"className"],[1,"sign"],[3,"innerHTML"],["size","10"],["size","1"],["color","light",4,"ngIf"],[1,"lane-selector"],["type","radio","value","left",3,"id","name","checked","change"],[1,"label-background","left",3,"for"],["type","radio","value","middle",3,"id","name","checked","change"],[1,"label-background","middle",3,"for"],["type","radio","value","right",3,"id","name","checked","change"],[1,"label-background","right",3,"for"],["color","light"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1),e._UZ(3,"ion-menu-button"),e.qZA(),e.TgZ(4,"ion-title"),e._uU(5),e.ALo(6,"translate"),e.qZA()(),e.TgZ(7,"ion-item"),e._UZ(8,"ion-textarea",2,3),e.ALo(10,"translate"),e.TgZ(11,"ion-button",4),e.NdJ("click",function(){return n.resetEntries()}),e._uU(12),e.ALo(13,"translate"),e.qZA()(),e.TgZ(14,"ion-item")(15,"div"),e.YNc(16,k,2,1,"ion-button",5),e.qZA()()(),e.TgZ(17,"ion-content",6,7)(19,"ion-list"),e.YNc(20,L,24,22,"ion-item",8),e.qZA(),e.TgZ(21,"ion-fab",9)(22,"ion-label"),e._uU(23),e.ALo(24,"translate"),e.qZA(),e.TgZ(25,"ion-fab-button",10)(26,"ion-icon",11),e.NdJ("click",function(){return n.accept()}),e.qZA()()()()),2&t&&(e.xp6(5),e.Oqu(e.lcZ(6,7,"Edit")),e.xp6(3),e.s9C("placeholder",e.lcZ(10,9,"Enter sentence")),e.xp6(4),e.hij(" ",e.lcZ(13,11,"Reset")," "),e.xp6(4),e.Q6J("ngForOf",n.matchingWords),e.xp6(4),e.Q6J("ngForOf",n.editedDocument.editedsigns)("ngForTrackBy",n.trackFound),e.xp6(3),e.Oqu(e.lcZ(24,13,"Next")))},dependencies:[d.sg,d.O5,c.yp,c.YG,c.Sm,c.wI,c.W2,c.IJ,c.W4,c.jY,c.Gu,c.gu,c.Ie,c.Q$,c.q_,c.fG,c.Nd,c.g2,c.wd,c.sr,c.j9,_.z,E.X$],styles:[".sign[_ngcontent-%COMP%]{padding:0}.editbutton[_ngcontent-%COMP%]{margin:5px}.lane-selector[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{margin:0;padding:0;-webkit-appearance:none;-moz-appearance:none;appearance:none}.left[_ngcontent-%COMP%]{background-image:url(Left.9ceb3a0629236b9f.png)}.middle[_ngcontent-%COMP%]{background-image:url(Center.08b7e59845b55088.png)}.right[_ngcontent-%COMP%]{background-image:url(Right.0ad7abede97a13a1.png)}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:checked + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.2) grayscale(.5) opacity(.9);filter:brightness(1.2) grayscale(.5) opacity(.9);background-color:#397ac4}.lane-selector[_ngcontent-%COMP%]   input[type=radio][_ngcontent-%COMP%]:not(:checked) + label[_ngcontent-%COMP%]{-moz-filter:brightness(1.8) grayscale(1) opacity(.7);filter:brightness(1.8) grayscale(1) opacity(.7)}.label-background[_ngcontent-%COMP%]{cursor:pointer;background-size:contain;background-position:center;background-repeat:no-repeat;display:inline-block;margin:0 2px;width:45px;height:45px;transition:all .1s ease-in}.lane-left[_ngcontent-%COMP%]{padding-right:40px}.lane-middle[_ngcontent-%COMP%]{padding-left:20px;padding-right:20px}.lane-right[_ngcontent-%COMP%]{padding-left:40px}.item-text-center[_ngcontent-%COMP%]{display:-moz-flex;display:flex;-moz-align-items:center;align-items:center;position:absolute;top:0;height:100%}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]{display:flex;align-items:center}.vertical-center[_ngcontent-%COMP%]   .fixed-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%], .vertical-center[_ngcontent-%COMP%]   .scroll-content[_ngcontent-%COMP%]   ion-list[_ngcontent-%COMP%]{max-width:300px;width:100%;margin:auto;text-align:center}"]}),i})();var G=o(5503),J=o(4466);const R=[{path:"",component:D}];let U=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,p.u5,c.Pc,m.Bz.forChild(R),G.D,J.m]}),i})()}}]);
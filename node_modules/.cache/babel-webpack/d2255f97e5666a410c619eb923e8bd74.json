{"ast":null,"code":"import _asyncToGenerator from \"C:/Users/Fernando Martinez/Documents/Programacion/SignWriter/Frontend JD/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n/// <reference path=\"./../../declarations.d.ts\" />\n/// <reference path=\"./../../declarations.d.ts\" />\nimport { BrowserTypeService } from './../browser-type.service';\nimport { ShareDesktopPage } from './../share-desktop/share-desktop.page';\nimport { ShareAndroidPage } from './../share-android/share-android.page';\nimport { SubscriptionService } from './../services/subscription.service';\nimport { Router, NavigationStart, NavigationEnd } from '@angular/router';\nimport { ModalController } from '@ionic/angular';\nimport { TranslateService } from '@ngx-translate/core';\nimport { DocumentService } from '../document.service';\nimport { ShareIOSPage } from '../share-ios/share-ios.page';\nimport * as i0 from \"@angular/core\";\nimport * as i1 from \"@ionic/angular\";\nimport * as i2 from \"../document.service\";\nimport * as i3 from \"./../services/subscription.service\";\nimport * as i4 from \"@ngx-translate/core\";\nimport * as i5 from \"./../browser-type.service\";\nimport * as i6 from \"@angular/router\";\nimport * as i7 from \"@angular/forms\";\nimport * as i8 from \"../safe-html.pipe\";\nexport class ViewPage {\n  constructor(modalController, documentService, subscriptionService, translate, btUtil, router) {\n    this.modalController = modalController;\n    this.documentService = documentService;\n    this.subscriptionService = subscriptionService;\n    this.translate = translate;\n    this.btUtil = btUtil;\n    this.router = router;\n    this.imageheight = 900; // Force fonts to load before anything is shown\n\n    this.preloadFonts = ssw.paragraph('M547x518S2ff00482x483S11911518x488S26600531x451');\n    this.router.events.subscribe(event => {\n      if (event instanceof NavigationStart) {\n        const fsw = this.documentService.getFSW();\n        this.document = ssw.paragraph(fsw);\n        this.imageheight = 200;\n      }\n\n      if (event instanceof NavigationEnd) {// Hide loading indicator\n      }\n    });\n  }\n\n  ngOnInit() {\n    this.subscriptionService.CanUse();\n  }\n\n  ionViewWillEnter() {\n    const fsw = this.documentService.getFSW();\n    this.document = ssw.paragraph(fsw);\n  }\n\n  share1() {\n    const fsw = this.documentService.getFSW();\n    this.document = ssw.paragraph(fsw);\n    requestAnimationFrame(() => this.sharecontinuation1(fsw));\n  }\n\n  share() {\n    var _this = this;\n\n    return _asyncToGenerator(function* () {\n      const fsw = _this.documentService.getFSW();\n\n      const btUtils = _this.btUtil.utils();\n\n      if (fsw && fsw !== null) {\n        if (btUtils.Android()) {\n          yield _this.ShareAndroid(fsw);\n        } else if (btUtils.iOS() || btUtils.iPad() || btUtils.iPhone() || btUtils.iPod()) {\n          yield _this.ShareIOS(fsw);\n        } else {\n          yield _this.ShareDesktop(fsw);\n        }\n      }\n    })();\n  }\n\n  ShareIOS(fsw) {\n    var _this2 = this;\n\n    return _asyncToGenerator(function* () {\n      const canvas1 = getSignTextCanvas(fsw, 20.0, _this2.imageheight);\n\n      _this2.AddLink(canvas1);\n\n      const modal = yield _this2.modalController.create({\n        component: ShareIOSPage,\n        componentProps: {\n          canvas: canvas1,\n          imagebase64: canvas1.toDataURL('image/png')\n        }\n      });\n      yield modal.present();\n      yield modal.onDidDismiss();\n    })();\n  }\n\n  AddLink(canvas) {\n    const temp_cnvs = this.tempCanvas(canvas);\n    const ctx = this.reSizeCanvas(canvas, temp_cnvs);\n    ctx.font = '30px Arial';\n    ctx.fillStyle = 'blue';\n    ctx.textAlign = 'center';\n    ctx.fillText('SWSW SwSignWriter.jonathanduncan.pro', canvas.width / 2, canvas.height - 10);\n  }\n\n  reSizeCanvas(canvas, temp_cnvs) {\n    canvas.height += 35;\n    const ctx = canvas.getContext('2d');\n    ctx.fillStyle = 'white';\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\n    ctx.drawImage(temp_cnvs, 0, 0);\n    return ctx;\n  }\n\n  tempCanvas(canvas) {\n    const temp_cnvs = document.createElement('canvas');\n    const temp_cntx = temp_cnvs.getContext('2d');\n    temp_cnvs.width = canvas.width;\n    temp_cnvs.height = canvas.height;\n    temp_cntx.fillStyle = 'white';\n    temp_cntx.fillRect(0, 0, canvas.width, canvas.height);\n    temp_cntx.drawImage(canvas, 0, 0);\n    return temp_cnvs;\n  }\n\n  ShareAndroid(fsw) {\n    var _this3 = this;\n\n    return _asyncToGenerator(function* () {\n      const canvas1 = getSignTextCanvas(fsw, 20.0, _this3.imageheight);\n\n      _this3.AddLink(canvas1);\n\n      const modal = yield _this3.modalController.create({\n        component: ShareAndroidPage,\n        componentProps: {\n          canvas: canvas1,\n          imagebase64: canvas1.toDataURL('image/png')\n        }\n      });\n      yield modal.present();\n      yield modal.onDidDismiss();\n    })();\n  }\n\n  ShareDesktop(fsw) {\n    var _this4 = this;\n\n    return _asyncToGenerator(function* () {\n      const canvas1 = getSignTextCanvas(fsw, 20.0, _this4.imageheight);\n\n      _this4.AddLink(canvas1);\n\n      const modal = yield _this4.modalController.create({\n        component: ShareDesktopPage,\n        componentProps: {\n          canvas: canvas1,\n          imagebase64: canvas1.toDataURL('image/png')\n        }\n      });\n      yield modal.present();\n      yield modal.onDidDismiss();\n    })();\n  }\n\n  heightChange(ev) {\n    this.signtextHeight = ev.detail.value;\n  }\n\n  edit() {\n    return this.router.navigateByUrl('/edit');\n  }\n\n  sharecontinuation1(fsw) {\n    return _asyncToGenerator(function* () {})();\n  }\n\n  isCordova() {\n    return !!window['cordova'];\n  }\n\n}\n\nViewPage.ɵfac = function ViewPage_Factory(t) {\n  return new (t || ViewPage)(i0.ɵɵdirectiveInject(i1.ModalController), i0.ɵɵdirectiveInject(i2.DocumentService), i0.ɵɵdirectiveInject(i3.SubscriptionService), i0.ɵɵdirectiveInject(i4.TranslateService), i0.ɵɵdirectiveInject(i5.BrowserTypeService), i0.ɵɵdirectiveInject(i6.Router));\n};\n\nViewPage.ɵcmp = i0.ɵɵdefineComponent({\n  type: ViewPage,\n  selectors: [[\"app-view\"]],\n  decls: 31,\n  vars: 18,\n  consts: [[\"slot\", \"start\"], [\"justify-content-center\", \"\"], [\"min\", \"50\", \"max\", \"900\", \"step\", \"10\", \"pin\", \"true\", 3, \"ngModel\", \"ngModelChange\", \"ionChange\"], [\"size\", \"small\", \"slot\", \"start\", \"name\", \"resize\"], [\"slot\", \"end\", \"name\", \"resize\"], [\"padding\", \"\"], [\"id\", \"document\", 1, \"document\"], [1, \"signtext\"], [3, \"innerHTML\"], [\"horizontal\", \"end\", \"slot\", \"fixed\", \"vertical\", \"bottom\"], [3, \"click\"], [\"name\", \"share\", 2, \"zoom\", \"2\"], [\"id\", \"canvas\"], [1, \"preloadFonts\", 3, \"innerHTML\"]],\n  template: function ViewPage_Template(rf, ctx) {\n    if (rf & 1) {\n      i0.ɵɵelementStart(0, \"ion-header\");\n      i0.ɵɵelementStart(1, \"ion-toolbar\");\n      i0.ɵɵelementStart(2, \"ion-buttons\", 0);\n      i0.ɵɵelement(3, \"ion-menu-button\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(4, \"ion-title\");\n      i0.ɵɵtext(5);\n      i0.ɵɵpipe(6, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(7, \"ion-item\");\n      i0.ɵɵelementStart(8, \"ion-grid\");\n      i0.ɵɵelementStart(9, \"ion-row\", 1);\n      i0.ɵɵelementStart(10, \"ion-label\");\n      i0.ɵɵtext(11);\n      i0.ɵɵpipe(12, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(13, \"ion-row\");\n      i0.ɵɵelementStart(14, \"ion-range\", 2);\n      i0.ɵɵlistener(\"ngModelChange\", function ViewPage_Template_ion_range_ngModelChange_14_listener($event) {\n        return ctx.imageheight = $event;\n      })(\"ionChange\", function ViewPage_Template_ion_range_ionChange_14_listener($event) {\n        return ctx.heightChange($event);\n      });\n      i0.ɵɵelement(15, \"ion-icon\", 3);\n      i0.ɵɵelement(16, \"ion-icon\", 4);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(17, \"ion-content\", 5);\n      i0.ɵɵelementStart(18, \"div\", 6);\n      i0.ɵɵelementStart(19, \"div\", 7);\n      i0.ɵɵelement(20, \"span\", 8);\n      i0.ɵɵpipe(21, \"safeHtml\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(22, \"ion-fab\", 9);\n      i0.ɵɵelementStart(23, \"ion-label\");\n      i0.ɵɵtext(24);\n      i0.ɵɵpipe(25, \"translate\");\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementStart(26, \"ion-fab-button\", 10);\n      i0.ɵɵlistener(\"click\", function ViewPage_Template_ion_fab_button_click_26_listener() {\n        return ctx.share();\n      });\n      i0.ɵɵelement(27, \"ion-icon\", 11);\n      i0.ɵɵelementEnd();\n      i0.ɵɵelementEnd();\n      i0.ɵɵelement(28, \"canvas\", 12);\n      i0.ɵɵelement(29, \"span\", 13);\n      i0.ɵɵpipe(30, \"safeHtml\");\n      i0.ɵɵelementEnd();\n    }\n\n    if (rf & 2) {\n      i0.ɵɵadvance(5);\n      i0.ɵɵtextInterpolate1(\" \", i0.ɵɵpipeBind1(6, 8, \"Document\"), \" \");\n      i0.ɵɵadvance(6);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(12, 10, \"Image height\"));\n      i0.ɵɵadvance(3);\n      i0.ɵɵproperty(\"ngModel\", ctx.imageheight);\n      i0.ɵɵadvance(5);\n      i0.ɵɵstyleProp(\"height\", ctx.signtextHeight, \"px\");\n      i0.ɵɵadvance(1);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(21, 12, ctx.document), i0.ɵɵsanitizeHtml);\n      i0.ɵɵadvance(4);\n      i0.ɵɵtextInterpolate(i0.ɵɵpipeBind1(25, 14, \"Share\"));\n      i0.ɵɵadvance(5);\n      i0.ɵɵproperty(\"innerHTML\", i0.ɵɵpipeBind1(30, 16, ctx.preloadFonts), i0.ɵɵsanitizeHtml);\n    }\n  },\n  directives: [i1.IonHeader, i1.IonToolbar, i1.IonButtons, i1.IonMenuButton, i1.IonTitle, i1.IonItem, i1.IonGrid, i1.IonRow, i1.IonLabel, i1.IonRange, i1.SelectValueAccessor, i7.NgControlStatus, i7.NgModel, i1.IonIcon, i1.IonContent, i1.IonFab, i1.IonFabButton],\n  pipes: [i4.TranslatePipe, i8.SafeHtmlPipe],\n  styles: [\".document[_ngcontent-%COMP%] {\\n  width: 100%;\\n  height: 100%;\\n  overflow: auto;\\n}\\n.document[_ngcontent-%COMP%]   div[_ngcontent-%COMP%] {\\n  height: 100%;\\n}\\n.preloadFonts[_ngcontent-%COMP%] {\\n  width: 0px;\\n  height: 0px;\\n  display: inline-block;\\n  overflow: hidden;\\n}\\nion-range[_ngcontent-%COMP%] {\\n  padding-top: 0;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIi4uXFwuLlxcLi5cXHZpZXcucGFnZS5zY3NzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBO0VBQ0ksV0FBQTtFQUNBLFlBQUE7RUFDQSxjQUFBO0FBQ0o7QUFDSTtFQUNJLFlBQUE7QUFDUjtBQUdBO0VBQ0ksVUFBQTtFQUNBLFdBQUE7RUFDQSxxQkFBQTtFQUNBLGdCQUFBO0FBQUo7QUFHQTtFQUNJLGNBQUE7QUFBSiIsImZpbGUiOiJ2aWV3LnBhZ2Uuc2NzcyIsInNvdXJjZXNDb250ZW50IjpbIi5kb2N1bWVudCB7XHJcbiAgICB3aWR0aDogMTAwJTtcclxuICAgIGhlaWdodDogMTAwJTtcclxuICAgIG92ZXJmbG93OiBhdXRvO1xyXG5cclxuICAgIGRpdiB7XHJcbiAgICAgICAgaGVpZ2h0OiAxMDAlO1xyXG4gICAgfVxyXG59XHJcblxyXG4ucHJlbG9hZEZvbnRzIHtcclxuICAgIHdpZHRoOiAwcHg7XHJcbiAgICBoZWlnaHQ6IDBweDtcclxuICAgIGRpc3BsYXk6IGlubGluZS1ibG9jaztcclxuICAgIG92ZXJmbG93OiBoaWRkZW47XHJcbn1cclxuXHJcbmlvbi1yYW5nZSB7XHJcbiAgICBwYWRkaW5nLXRvcDogMDtcclxufVxyXG4iXX0= */\"]\n});","map":{"version":3,"sources":["C:\\Users\\Fernando Martinez\\Documents\\Programacion\\SignWriter\\Frontend JD\\src\\app\\view\\view.page.ts","C:\\Users\\Fernando Martinez\\Documents\\Programacion\\SignWriter\\Frontend JD\\src\\app\\view\\view.page.html"],"names":[],"mappings":"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","sourcesContent":["/// <reference path=\"./../../declarations.d.ts\" />\r\n\r\nimport { BrowserTypeService } from './../browser-type.service';\r\nimport { ShareDesktopPage } from './../share-desktop/share-desktop.page';\r\nimport { ShareAndroidPage } from './../share-android/share-android.page';\r\nimport { SubscriptionService } from './../services/subscription.service';\r\nimport { Router, NavigationStart, NavigationEnd } from '@angular/router';\r\nimport { Component, OnInit } from '@angular/core';\r\nimport { ModalController } from '@ionic/angular';\r\nimport { TranslateService } from '@ngx-translate/core';\r\n\r\nimport { DocumentService } from '../document.service';\r\nimport { ShowImagePage } from '../show-image/show-image.page';\r\nimport { ShareIOSPage } from '../share-ios/share-ios.page';\r\n\r\n@Component({\r\n  selector: 'app-view',\r\n  templateUrl: './view.page.html',\r\n  styleUrls: ['./view.page.scss']\r\n})\r\nexport class ViewPage implements OnInit {\r\n  public imageheight = 900;\r\n  public document: string;\r\n  public preloadFonts: string;\r\n  public signtextHeight: number;\r\n\r\n  constructor(\r\n    public modalController: ModalController,\r\n    private documentService: DocumentService,\r\n    private subscriptionService: SubscriptionService,\r\n    public translate: TranslateService,\r\n    public btUtil: BrowserTypeService,\r\n    private router: Router\r\n  ) {\r\n    // Force fonts to load before anything is shown\r\n    this.preloadFonts = ssw.paragraph('M547x518S2ff00482x483S11911518x488S26600531x451');\r\n\r\n    this.router.events.subscribe(event => {\r\n      if (event instanceof NavigationStart) {\r\n        const fsw = this.documentService.getFSW();\r\n        this.document = ssw.paragraph(fsw);\r\n        this.imageheight = 200;\r\n      }\r\n\r\n      if (event instanceof NavigationEnd) {\r\n        // Hide loading indicator\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n    this.subscriptionService.CanUse();\r\n  }\r\n\r\n  ionViewWillEnter() {\r\n    const fsw = this.documentService.getFSW();\r\n    this.document = ssw.paragraph(fsw);\r\n  }\r\n\r\n  public share1() {\r\n    const fsw = this.documentService.getFSW();\r\n    this.document = ssw.paragraph(fsw);\r\n\r\n    requestAnimationFrame(() => this.sharecontinuation1(fsw));\r\n  }\r\n\r\n  public async share() {\r\n    const fsw = this.documentService.getFSW();\r\n    const btUtils = this.btUtil.utils();\r\n    if (fsw && fsw !== null) {\r\n      if (btUtils.Android()) {\r\n        await this.ShareAndroid(fsw);\r\n      } else if (btUtils.iOS() || btUtils.iPad() || btUtils.iPhone() || btUtils.iPod()) {\r\n        await this.ShareIOS(fsw);\r\n      } else {\r\n        await this.ShareDesktop(fsw);\r\n      }\r\n    }\r\n  }\r\n\r\n  private async ShareIOS(fsw: string) {\r\n    const canvas1 = getSignTextCanvas(fsw, 20.0, this.imageheight) as HTMLCanvasElement;\r\n    this.AddLink(canvas1);\r\n    const modal = await this.modalController.create({\r\n      component: ShareIOSPage,\r\n      componentProps: { canvas: canvas1, imagebase64: canvas1.toDataURL('image/png') }\r\n    });\r\n    await modal.present();\r\n    await modal.onDidDismiss();\r\n  }\r\n\r\n  private AddLink(canvas: HTMLCanvasElement) {\r\n    const temp_cnvs = this.tempCanvas(canvas);\r\n    const ctx = this.reSizeCanvas(canvas, temp_cnvs);\r\n    ctx.font = '30px Arial';\r\n    ctx.fillStyle = 'blue';\r\n    ctx.textAlign = 'center';\r\n    ctx.fillText('SWSW SwSignWriter.jonathanduncan.pro', canvas.width / 2, canvas.height - 10 );\r\n  }\r\n\r\n  private reSizeCanvas(canvas: HTMLCanvasElement, temp_cnvs: HTMLCanvasElement) {\r\n    canvas.height += 35;\r\n    const ctx = canvas.getContext('2d');\r\n    ctx.fillStyle = 'white';\r\n    ctx.fillRect(0, 0, canvas.width, canvas.height);\r\n    ctx.drawImage(temp_cnvs, 0, 0);\r\n    return ctx;\r\n  }\r\n\r\n  private tempCanvas(canvas: HTMLCanvasElement) {\r\n    const temp_cnvs = document.createElement('canvas');\r\n    const temp_cntx = temp_cnvs.getContext('2d');\r\n    temp_cnvs.width = canvas.width;\r\n    temp_cnvs.height = canvas.height;\r\n    temp_cntx.fillStyle = 'white';\r\n    temp_cntx.fillRect(0, 0, canvas.width, canvas.height);\r\n    temp_cntx.drawImage(canvas, 0, 0);\r\n    return temp_cnvs;\r\n  }\r\n\r\n  private async ShareAndroid(fsw: string) {\r\n    const canvas1 = getSignTextCanvas(fsw, 20.0, this.imageheight) as HTMLCanvasElement;\r\n    this.AddLink(canvas1);\r\n    const modal = await this.modalController.create({\r\n      component: ShareAndroidPage,\r\n      componentProps: { canvas: canvas1, imagebase64: canvas1.toDataURL('image/png') }\r\n    });\r\n    await modal.present();\r\n    await modal.onDidDismiss();\r\n  }\r\n\r\n  private async ShareDesktop(fsw: string) {\r\n    const canvas1 = getSignTextCanvas(fsw, 20.0, this.imageheight) as HTMLCanvasElement;\r\n    this.AddLink(canvas1);\r\n    const modal = await this.modalController.create({\r\n      component: ShareDesktopPage,\r\n      componentProps: { canvas: canvas1, imagebase64: canvas1.toDataURL('image/png') }\r\n    });\r\n    await modal.present();\r\n    await modal.onDidDismiss();\r\n  }\r\n\r\n  heightChange(ev: any) {\r\n    this.signtextHeight = ev.detail.value;\r\n  }\r\n\r\n  public edit() {\r\n    return this.router.navigateByUrl('/edit');\r\n  }\r\n\r\n  private async sharecontinuation1(fsw: string) { }\r\n\r\n  isCordova() {\r\n    return !!window['cordova'];\r\n  }\r\n}\r\n","<ion-header>\r\n  <ion-toolbar>\r\n    <ion-buttons slot=\"start\">\r\n      <ion-menu-button></ion-menu-button>\r\n    </ion-buttons>\r\n    <ion-title>\r\n      {{'Document' | translate}}\r\n    </ion-title>\r\n    <ion-item>\r\n      <ion-grid>\r\n        <ion-row justify-content-center>\r\n          <ion-label>{{'Image height' | translate}}</ion-label>\r\n        </ion-row>\r\n        <ion-row>\r\n          <ion-range\r\n            min=\"50\"\r\n            max=\"900\"\r\n            step=\"10\"\r\n            [(ngModel)]=\"imageheight\"\r\n            pin=\"true\"\r\n            (ionChange)=\"heightChange($event)\"\r\n          >\r\n            <ion-icon size=\"small\" slot=\"start\" name=\"resize\"></ion-icon>\r\n            <ion-icon slot=\"end\" name=\"resize\"></ion-icon>\r\n          </ion-range>\r\n        </ion-row>\r\n      </ion-grid>\r\n    </ion-item>\r\n\r\n    <!-- <ion-buttons slot=\"end\">\r\n\r\n      <ion-button *ngIf=\"isCordova()\" color=\"primary\" fill=\"solid\" (click)=\"share()\">\r\n         {{'Share' | translate}}<ion-icon name=\"share\"></ion-icon>\r\n      </ion-button>\r\n      <ion-button *ngIf=\"!isCordova()\" color=\"primary\" fill=\"solid\" (click)=\"copy()\">\r\n        <ion-icon name=\"copy\"></ion-icon>\r\n      </ion-button>\r\n    </ion-buttons> -->\r\n  </ion-toolbar>\r\n</ion-header>\r\n\r\n<ion-content padding>\r\n  <div id=\"document\" class=\"document\">\r\n    <div class=\"signtext\" [style.height.px]=\"signtextHeight\">\r\n      <span [innerHTML]=\"document | safeHtml\"></span>\r\n    </div>\r\n  </div>\r\n  <!-- <ion-fab vertical=\"bottom\" horizontal=\"end\" slot=\"fixed\">\r\n    <ion-fab-button>\r\n      <ion-icon (click)=\"edit()\" name=\"create\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab> \r\n\r\n  <div>\r\n  <ion-fab horizontal=\"end\" slot=\"fixed\" vertical=\"bottom\">\r\n      <ion-label>Edit</ion-label>\r\n      <ion-fab-button>\r\n          <ion-icon (click)=\"edit()\" name=\"arrow-dropright-circle\" style=\"zoom:2.0;\"></ion-icon>\r\n      </ion-fab-button>\r\n  </ion-fab>\r\n</div>\r\n  -->\r\n  <ion-fab horizontal=\"end\" slot=\"fixed\" vertical=\"bottom\">\r\n    <ion-label>{{'Share' | translate}}</ion-label>\r\n    <!-- <ion-fab-button (click)=\"share1()\" *ngIf=\"isCordova()\">\r\n          <ion-icon  name=\"arrow-dropright-circle\" style=\"zoom:2.0;\"></ion-icon>\r\n      </ion-fab-button> -->\r\n    <ion-fab-button (click)=\"share()\">\r\n      <!-- *ngIf=\"!isCordova()\"  -->\r\n      <ion-icon name=\"share\" style=\"zoom: 2;\"></ion-icon>\r\n    </ion-fab-button>\r\n  </ion-fab>\r\n\r\n  <canvas id=\"canvas\"></canvas>\r\n  <span class=\"preloadFonts\" [innerHTML]=\"preloadFonts | safeHtml\"></span>\r\n</ion-content>\r\n"],"sourceRoot":""},"metadata":{},"sourceType":"module"}